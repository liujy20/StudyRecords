## 面试题七

一、场景题：调用接口，发100次请求，每隔500ms发一次，你怎么做？怎么统计成功和失败的次数？如果没有通信到后端呢？就是说请求并没有到达后端，页面就已经报错提示失败了，纯前端的方法你怎么统计呢？

每个请求都封装promise封装，设置请求时间。

promise.all\race\allsetlet

promise.allsetled[promise1,promise2]

可以得到所有请求的结果，不管成功还是失败

需要借助于axios请求拦截器或者响应拦截器

定义数组，在拦截器里面讲请求存放起来。

当响应拦截器成功执行，后端请求进入后端，修改数组某个请求状态。

没有进入响应拦截器，说明请求，没有到达服务器。默认的状态失败



站长，统计前端页面访问的次数。

自己写JS脚本，配置本次存储、cookie技术来实现



二、场景题：低代码平台遇到问题怎么解决？

例子：有一个网站，这个网站里面讲网页上需要实现的组件封装好了，你可以拖动这些组装成一个新的页面。

qq空间

1. 适配问题，某些模块拖拽后布局的页面适配，移动端的页面。设计低代码平台，用相对单位来设计移动端
2. 图表加载问题，图表数据都是静态，但是数据异步得到，进来没有数据，等你异步加载完成后，图表渲染完毕，需要监控数据变化，动态加载图表
3. 组件封装问题，代码中组件封装，考虑数据的变化

三、element-ui有什么明显的错误？

tree组件，使用过程中，如果动态设置key，导致filter这个api会默认失效

el-select，这个组件默认不能继承父元素宽度，

原因：本身是inline-block

修改element组件样式,有些组件可以实现修改，有些组件无法修改

```js
.el-header{
    d
}
```

四、echrts图表怎么获取模版，除了官网，还可以怎么获取？

echarts社区里面有很多丰富的图表，甚至比官方还有丰富。

github、gitee这些平台，很多开源的图表。

五、场景：当前页面请求没有返回时需要进入下一个页面，当前页面请求如何处理

造成什么问题：内存泄漏，内存资源消耗

每个请求都可以设置 axios，取消cancelToken



页面上10个请求，当某个失败的时候，取消其他请求

  六、useRef和ref和createRef有啥不一样

useRef是一个hook，在函数组件中用。底层，const oref = React.createRef()   oref.current

ref这个一般用于组件身上，ref放在一个类组件上面，得到当前这个类组件所有内容。

ref放在一个函数组件身上，无法获取当前组件内容

ref绑定在节点上面，当React，解析JSX的时候，读取当前哪些节点身上有ref引用，将有ref引用节点，统一标志。

refs 得到所有标志好的dom节点



createRef不适用于函数组件



七、轮询、长连接、websokct

ajax轮询：让浏览器每隔xx s就发送一次请求到后端。询问服务器得到成功的结果。

场景：秒杀。

```js
function fetch(){
    ajax({
        url:"",
        success(res){
            if(res.code==1){
               alert("抢购成功")
               }
            else if(res.code==2){
                   setInterva(fetch,300)
            }else if(res.code==3){
                  alert("抢购失败")   
                     }
        }
    })
}
```

短时间内容，频繁发送信息

客户端和服务器通信完成后，不会马上断开，保持连接状态

http1.0短链接，http1.1默认就是长连接

```js
connect:keep-alive
```

websokct:双工通信，基于http协议之上的封装协议。

websokct底层和后端链接成功后，后端可以主动发送消息到前端

一直保持链接状态，手动断开，后端无法找到客户端

场景：echarts图表、语音播报















